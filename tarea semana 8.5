-- Crear base de datos
CREATE DATABASE Biblioteca;
USE Biblioteca;

-- Tabla de autores
CREATE TABLE Autores (
    id_autor INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    nacionalidad VARCHAR(50),
    fecha_nacimiento DATE
);

-- Tabla de libros
CREATE TABLE Libros (
    id_libro INT AUTO_INCREMENT PRIMARY KEY,
    titulo VARCHAR(150) NOT NULL,
    genero VARCHAR(50),
    año_publicacion INT,
    id_autor INT,
    FOREIGN KEY (id_autor) REFERENCES Autores(id_autor)
);

-- Tabla de usuarios
CREATE TABLE Usuarios (
    id_usuario INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE,
    telefono VARCHAR(15)
);

-- Tabla de préstamos
CREATE TABLE Prestamos (
    id_prestamo INT AUTO_INCREMENT PRIMARY KEY,
    id_usuario INT,
    id_libro INT,
    fecha_prestamo DATE DEFAULT (CURRENT_DATE),
    fecha_devolucion DATE,
    devuelto BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (id_usuario) REFERENCES Usuarios(id_usuario),
    FOREIGN KEY (id_libro) REFERENCES Libros(id_libro)
);

-- Insertar algunos datos de ejemplo
INSERT INTO Autores (nombre, nacionalidad, fecha_nacimiento) VALUES
('Gabriel García Márquez', 'Colombiana', '1927-03-06'),
('Mario Vargas Llosa', 'Peruana', '1936-03-28'),
('J.K. Rowling', 'Británica', '1965-07-31');

INSERT INTO Libros (titulo, genero, año_publicacion, id_autor) VALUES
('Cien años de soledad', 'Realismo mágico', 1967, 1),
('La ciudad y los perros', 'Novela', 1963, 2),
('Harry Potter y la piedra filosofal', 'Fantasía', 1997, 3);

INSERT INTO Usuarios (nombre, email, telefono) VALUES
('Laura Torres', 'laura@example.com', '987654321'),
('Miguel Rojas', 'miguelr@example.com', '912345678');

INSERT INTO Prestamos (id_usuario, id_libro, fecha_devolucion) VALUES
(1, 1, '2025-10-10'),
(2, 3, '2025-10-15');